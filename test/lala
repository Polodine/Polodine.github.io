body,
html{
	height: 100%;
	width: 100%;
	margin: 0;
	padding: 0;
	position: relative;
	background: #ffe18d;
}

.content-block{
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	overflow-x: hidden;
	overflow-y: auto;
	scroll-behavior: smooth;
	-webkit-overflow-scrolling: touch;
}

.header-container{
	height: 60px;
}

.header{
	height: inherit;
	background: #0f776d;
	width: 80%;
	margin: 0 10%;
}

.sticky-absolute{
	position: absolute;
	top: 0;
	z-index: 10;
}

.sticky-fixed{
	position: fixed;
	top: 0;
	z-index: 10;
}
(function(){
	var contentContainer = document.querySelector('.content-block');
	var headerContainers = document.querySelectorAll('.header-container');
	var iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;

	Array.prototype.forEach.call(headerContainers, function(header, i){	
		var header = headerContainers[i].querySelector('.header');

		contentContainer.addEventListener("scroll", Sticky);

		window.addEventListener("touchstart", Sticky);
		window.addEventListener("touchend", Sticky);
		window.addEventListener("touchmove", iOSBug);

		function iOSBug(event){
			var styles = getComputedStyle(document.body);
			var stylesC = getComputedStyle(contentContainer);
			var stylesH = getComputedStyle(header);

			console.log(stylesH.top);
		}

		function Sticky(event){
			var top = headerContainers[i].getBoundingClientRect().top;	
			
			if( top <= contentContainer.getBoundingClientRect().top ){
				if(!iOS){
					header.classList.add('sticky-absolute');
					header.style.top = contentContainer.scrollTop + 'px';
				} else {
					header.classList.add('sticky-fixed');
					header.style.top = contentContainer.getBoundingClientRect().top;
				}
			} else {
				header.classList.remove('sticky-absolute');
				header.classList.remove('sticky-fixed');
			}
		}
	});

})();